Заметка
Price Elasticity of Demand (PED)
Цель - повышение количества продаж в штуках, 
	Влиние промо:
	выручка : влияние цены, влияние продаж, суммарно (абсолют, %)
	валовая прибыль : влияние цены, влияние себестоимости, влияние цены, суммарно (абсолют, %)
	Эффективность промо (Uplift продаж):
	Критерий эффективности по чекам: рост кол-ва чеков на 5-20% в зависимости от промо
	Критерий эффективности по продажам шт, по выручке, по прибыли 
Что потенциально влияет кроме цены: цены смежных товаров (halo-эффект, каннибализация), доход потребителя, 
	(мб не релевантно: предпочтения потребителя (лояльность бренду), ожидани потребителя (если есть ожидание роста цен на товар, выгодно купить заранее), количество покупателей на рынке.
	Все эти факторы потенциально видут к сдвигу всей кривой спроса от цены, в противном случае движение спроса происходит по кривой от цены.
Вероятно стоит сделать группировку схожих товаров в одну группу с единой ценой (мб медианной) и продажами взвешанными по ценам товаров в линейке
НО есть вопрос, как группировать сильноскорелированные товары и как учесть когда лишь на часть из группы есть промо
На каждый временной ряд хорошо бы иметь графики: 
	продаж во времени - реальные, прогнозные, бейзлайн (при регулярной цене) разным цветом
	цены во времени - регулярная цена, цена по промо
	под первым - разметка промо по времени (цветом механику)
	продажи от цены с нарисованой кривой эластичности
В начале удалить наблюдения с выбросами по цене или количестве продаж (или пометить их)
Выделить сезонную компоненту и тренд
Вероятно, сделать кластеризацию товаров (error-based clustering)
Построить модель на товар-магазин-неделя (предположим что промо будет понедельным, могут быть сильные колебания продаж внутри недели)
Качество прогноза оцениваем по MAPE, WAPE = (sum(abs(fact-frct))/sum(fact)) на категория-месяц (взять 2-3 месяца - такое же кол-во витрин с лагом в 1 мес)
Промо делятся по промо-механикам, заранее оговоренным. Количество промо ограничено. 
Нужно максимизировать штуки,маржу,выручку - суммарное количество продаж за период

О чем стоит помнить:
Программа лояльности только запущена, вероятно, лишь на тестовой группе, а значит могут быть параметры выделяющие группу из генеральной совокупности (только лояльные клиенты)
Если данные за несколько лет, то 2020 может быть нерепрезентативен изза пандемии
Упрощение: считаем что нет дефицита, товары не вводились и не выводились в анализируемый период (стоит проверить)

О чем описать в презентации:
Очистка данных - что убиралось и как (выбросы по цене и продажам, но не более 1%),
Мб добавить по предиктору для субститутов и контрибутов? - разница между ценой товара и взвешенной ценой группы контрибьютов/собститутов (предварительно их выделить)
Построение витрины (какие переменные и каких нет (не исп календарь событий, ...)) и целевой переменной (желательно с картинкой)
Рассчет ошибки, результаты по категориям и каждому из 2-3х месяцев валидации
В основном нас интересует коэффициент при цене (и мб при промо), если это лин модель сразу, иначе над бустингом сделать лин модель - сделать табличку с количеством нормальной эластичности (e<-10, -10<=e<-1, -1<=e<1, 1<=e)
Мб сделать модель с целевой переменной не числовой, а в единицах медианных продаж (весь ряд заранее разделить на медиану) и обучать по категории
После построения модели построить стандартизированный график ошибок

Переменные:
Категорийные: month_num, week_in_month, segment, brand, category, type
Числовые: lag9 lag10 lag11 lag12 lag13 lag14 lag15 lag16 lag17
		lag25 lag26 lag27 lag51 lag52 lag53 
		lag52_3weeks_avg lag52_3weeks_med lag52_3weeks_std lag52_3weeks_min lag52_3weeks_max 
		lag52_5weeks_avg lag52_5weeks_med lag52_5weeks_std lag52_5weeks_min lag52_5weeks_max
		Для каждого лага 9-17:
		lag9_month_pct10  lag9_month_pct90  lag9_quarter_pct10  lag9_quarter_pct90  lag9_halfyear_pct10  lag9_halfyear_pct90  lag9_year_pct10  lag9_year_pct90
		lag9_month_avg  lag9_quarter_avg  lag9_halfyear_avg  lag9_year_avg  lag9_month_med  lag9_quarter_med  lag9_halfyear_med  lag9_year_med  lag9_month_std
		начинаем с 9, поскольку нужно сделать прогноз на весь месяц через месяц